var a8Y58={'N0WW':function(f,E){return f===E;}
,'r4A':function(f,E){return f===E;}
,'r5A':function(f,E){return f>E;}
,'U2A':function(f,E){return f===E;}
,'F3WW':function(f,E){return f!==E;}
,'g8A':function(f,E){return f<E;}
,'d4A':function(f,E){return f<E;}
,'z5A':function(f,E){return f===E;}
,'B3A':function(f,E){return f<E;}
,'H1A':function(f,E){return f===E;}
,'O7A':function(f,E){return f===E;}
,'i8A':function(f,E){return f<E;}
,'i3A':function(f,E){return f===E;}
,'Q4A':function(f,E){return f<E;}
,'I3A':function(f,E){return f<E;}
,'a8A':function(f,E){return f===E;}
,'q3A':function(f,E){return f===E;}
,'J7A':function(f,E){return f>E;}
,'s7A':function(f,E){return f===E;}
,'W2A':function(f,E){return f<E;}
,'b2A':function(f,E){return f===E;}
,'x1A':function(f,E){return f>E;}
,'c0WW':function(f,E){return f>E;}
,'Y8A':function(f,E){return f<E;}
,'P3A':function(f,E){return f===E;}
,'a0WW':function(f,E){return f-E;}
,'N8A':function(f,E){return f>E;}
,'i0WW':function(f,E){return f===E;}
,'A2A':function(f,E){return f>E;}
,'Y3A':function(f,E){return f===E;}
,'n4A':function(f,E){return f<E;}
,'e7A':function(f,E){return f===E;}
,'t4A':function(f,E){return f>E;}
,'U7A':function(f,E){return f>E;}
,'U1A':function(f,E){return f>E;}
,'d5A':function(f,E){return f<E;}
,'K3WW':function(f,E){return f!==E;}
,'x2A':function(f,E){return f===E;}
,'b7A':function(f,E){return f>E;}
,'o7A':function(f,E){return f===E;}
,'o2A':function(f,E){return f<E;}
,'P8A':function(f,E){return f===E;}
,'v6A':function(f,E){return f>E;}
,'g0WW':function(f,E){return f>E;}
,'n6A':function(f,E){return f<E;}
,'H7A':function(f,E){return f===E;}
,'E0WW':function(f,E){return f>E;}
,'r6A':function(f,E){return f>E;}
,'j5A':function(f,E){return f<E;}
,'l2A':function(f,E){return f<E;}
,'D3A':function(f,E){return f!==E;}
,'E9A':function(f,E){return f===E;}
,'C2A':function(f,E){return f===E;}
,'L6A':function(f,E){return f===E;}
,'j6A':function(f,E){return f===E;}
,'X4A':function(f,E){return f===E;}
,'m0WW':function(f,E){return f>E;}
,'z3WW':function(f,E){return f===E;}
,'e1A':function(f,E){return f>E;}
,'R2A':function(f,E){return f>E;}
,'G5A':function(f,E){return f>E;}
,'S0WW':function(f,E){return f===E;}
,'p0WW':function(f,E){return f===E;}
,'M2A':function(f,E){return f===E;}
,'X3WW':function(f,E){return f===E;}
,'p9A':function(f,E){return f===E;}
,'S9A':function(f,E){return f<E;}
,'B9A':function(f,E){return f===E;}
,'u1A':function(f,E){return f<E;}
,'Q6A':function(f,E){return f>E;}
,'K6A':function(f,E){return f===E;}
,'z6A':function(f,E){return f===E;}
,'h0WW':function(f,E){return f>=E;}
,'F6A':function(f,E){return f!==E;}
,'w4A':function(f,E){return f!==E;}
,'f3WW':function(f,E){return f>E;}
,'s1A':function(f,E){return f===E;}
,'m3A':function(f,E){return f===E;}
,'O1A':function(f,E){return f>E;}
,'r3WW':function(f,E){return f>E;}
,'p3A':function(f,E){return f===E;}
,'m8A':function(f,E){return f<E;}
,'x7A':function(f,E){return f===E;}
,'h9A':function(f,E){return f<E;}
,'Y9A':function(f,E){return f===E;}
,'n5A':function(f,E){return f===E;}
,'y1A':function(f,E){return f===E;}
,'C1A':function(f,E){return f===E;}
,'V6A':function(f,E){return f===E;}
,'h8A':function(f,E){return f<E;}
,'A7A':function(f,E){return f>E;}
,'T6A':function(f,E){return f===E;}
,'F4A':function(f,E){return f<E;}
,'Z7A':function(f,E){return f===E;}
,'f4A':function(f,E){return f===E;}
,'u2A':function(f,E){return f<E;}
,'B0WW':function(f,E){return f<E;}
,'g9A':function(f,E){return f===E;}
,'d6A':function(f,E){return f===E;}
,'Z2A':function(f,E){return f>E;}
,'L5A':function(f,E){return f<E;}
,'w3WW':function(f,E){return f===E;}
,'R1A':function(f,E){return f===E;}
,'v4A':function(f,E){return f===E;}
,'J2A':function(f,E){return f<E;}
,'k9A':function(f,E){return f===E;}
,'z4A':function(f,E){return f<E;}
,'T5A':function(f,E){return f<E;}
,'T4A':function(f,E){return f>E;}
,'D9A':function(f,E){return f===E;}
,'M7A':function(f,E){return f===E;}
,'f6A':function(f,E){return f!==E;}
,'Q3WW':function(f,E){return f===E;}
,'D8A':function(f,E){return f<E;}
,'b1A':function(f,E){return f<E;}
,'q0WW':function(f,E){return f===E;}
,'c3A':function(f,E){return f<E;}
,'D0WW':function(f,E){return f===E;}
,'l1A':function(f,E){return f===E;}
,'F5A':function(f,E){return f>E;}
,'W1A':function(f,E){return f>E;}
,'q9A':function(f,E){return f<E;}
,'K5A':function(f,E){return f>E;}
,'m9A':function(f,E){return f===E;}
,'I9A':function(f,E){return f===E;}
,'Q5A':function(f,E){return f>E;}
,'k8A':function(f,E){return f===E;}
,'w5A':function(f,E){return f===E;}
,'S8A':function(f,E){return f>E;}
,'a3A':function(f,E){return f===E;}
,'f5A':function(f,E){return f>E;}
,'W7A':function(f,E){return f===E;}
,'v3WW':function(f,E){return f>E;}
,'C7A':function(f,E){return f>E;}
,'I0WW':function(f,E){return f<E;}
,'w6A':function(f,E){return f===E;}
,'J1A':function(f,E){return f===E;}
,'X5A':function(f,E){return f===E;}
,'V4A':function(f,E){return f!==E;}
,'i9A':function(f,E){return f===E;}
,'V3WW':function(f,E){return f<E;}
,'g3A':function(f,E){return f<E;}
,'s2A':function(f,E){return f>E;}
,'e2A':function(f,E){return f===E;}
,'G6A':function(f,E){return f<E;}
,'H2A':function(f,E){return f<E;}
,'V5A':function(f,E){return f===E;}
,'t5A':function(f,E){return f!==E;}
,'t6A':function(f,E){return f===E;}
,'l7A':function(f,E){return f===E;}
,'A1A':function(f,E){return f<E;}
,'E8A':function(f,E){return f===E;}
,'X6A':function(f,E){return f===E;}
,'c9A':function(f,E){return f<E;}
,'L4A':function(f,E){return f===E;}
,'t3WW':function(f,E){return f>E;}
,'K4A':function(f,E){return f===E;}
,'Y0WW':function(f,E){return f<E;}
,'N3A':function(f,E){return f!==E;}
,'B8A':function(f,E){return f*E;}
,'h3A':function(f,E){return f===E;}
,'S3A':function(f,E){return f===E;}
,'N9A':function(f,E){return f<E;}
,'P9A':function(f,E){return f===E;}
,'M1A':function(f,E){return f===E;}
,'u7A':function(f,E){return f>E;}
,'p8A':function(f,E){return f===E;}
,'R7A':function(f,E){return f>E;}
,'q8A':function(f,E){return f<E;}
,'j4A':function(f,E){return f>E;}
,'P0WW':function(f,E){return f===E;}
,'a9A':function(f,E){return f===E;}
,'o1A':function(f,E){return f<E;}
,'G3WW':function(f,E){return f===E;}
,'G4A':function(f,E){return f===E;}
,'Z1A':function(f,E){return f<E;}
,'k3A':function(f,E){return f<E;}
,'k0WW':function(f,E){return f<E;}
,'y7A':function(f,E){return f>E;}
,'v5A':function(f,E){return f>E;}
,'I8A':function(f,E){return f<E;}
,'c8A':function(f,E){return f<E;}
,'O2A':function(f,E){return f===E;}
,'y2A':function(f,E){return f===E;}
}
;function construct_custom_option_row(f,E){var F=jQuery("<textarea/>")["html"](E)["text"](),W=jQuery('<tr class="custom_setting"></tr>'),K=jQuery('<input type="text">')["addClass"]('custom_setting_name')["attr"]('placeholder','Setting Name')["val"](f),I=jQuery('<input type="text">')["addClass"]('custom_setting_value')["attr"]('placeholder','Value')["val"](F),U=jQuery('<a></a>')["attr"]('href','#')["addClass"]('remove_custom_setting remove_button button')["text"]('Remove');K["appendTo"](jQuery('<td></td>')["appendTo"](W));I["appendTo"](jQuery('<td></td>')["appendTo"](W));jQuery('<td>Custom setting</td>')["appendTo"](W);U["appendTo"](jQuery('<td></td>')["appendTo"](W));return W;}
function toggle_show_quantity_children(){if(jQuery('input.predefined_quantities[type="checkbox"]')["prop"]('checked')){jQuery('tr.MinQty')["hide"]();jQuery('tr.DefaultQty')["hide"]();jQuery('tr.Quantities')["show"]();}
else{jQuery('tr.MinQty')["show"]();jQuery('tr.DefaultQty')["show"]();jQuery('tr.Quantities')["hide"]();}
}
function search_object_by_property_value(E,F,W,K){var I=new Array(),U=new Array();if(typeof F!=='object'||a8Y58["c8A"](F.length,1)){I["push"](F);}
else{var C=function(f){I=f;}
;C(F);}
if(typeof W!=='object'||a8Y58["g8A"](W.length,1)){U["push"](W);}
else{var V=function(f){U=f;}
;V(W);}
for(var J=0;a8Y58["I8A"](J,E.length);J++){if(check_property_array(E[J],I,U)){if(typeof K==='function'){K(E,J);}
return true;}
else{for(var F in E[J]){if(typeof E[J][F]==='object'){var A=search_object_by_property_value(E[J][F],I,U,K);if(A){return true;}
}
}
}
}
return false;}
function display_option_settings(D){jQuery('table.option_settings_table tr.custom_setting')["each"](function(){jQuery(this)["remove"]();}
);search_object_by_property_value(tree_object,'ID',D,function(E,F){var W=E[F]["settings"];for(var K=0;a8Y58["W2A"](K,_price_matrix["_option_defaults"].length);K++){var I=_price_matrix["_option_defaults"][K],U=I["name"],C=I["value"];if(typeof W!=='undefined'){for(var V=0;a8Y58["o2A"](V,W.length);V++){if(a8Y58["U2A"](U,W[V]["attribute_name"])){var J=function(f){C=f[V]["value"];}
;J(W);break;}
}
}
var A=jQuery('table.option_settings_table .'+U);if(a8Y58["b2A"](A["attr"]('type'),'checkbox')){A["prop"]('checked',C);}
else{A["val"](C)["trigger"]('change');}
}
if(typeof W!=='undefined'){for(var K=0;a8Y58["u2A"](K,W.length);K++){var P=W[K],S=true;if(a8Y58["C2A"](P["attribute_name"]["toLowerCase"](),'label')){continue;}
for(var V=0;a8Y58["J2A"](V,_price_matrix["_option_defaults"].length);V++){var O=_price_matrix["_option_defaults"][V];if(a8Y58["y2A"](O["name"],P["attribute_name"])){var j=function(f){S=f;}
;j(false);break;}
}
if(S){jQuery('table.option_settings_table')["append"](construct_custom_option_row(P["attribute_name"],P["value"]));}
}
}
}
);}
function construct_tree_object(){var E=new Array();for(var F=0;a8Y58["k3A"](F,_price_matrix["_options"].length);F++){var W=_price_matrix["_options"][F],K='';for(var I in W){if(a8Y58["P3A"](I["toLowerCase"](),'options')){var U=function(f){K=f[I];}
;U(W);}
}
var C={'display_name':Base64["decode"](W["display_name"]),'options_name':K,'ID':get_random_num(),'object_type':'Field'}
;C["options"]=construct_tree_object_options(K);E["push"](C);}
return E;}
function find_tree_object_children(f,E){for(var F in f){if(typeof f[F]==='object'){for(var W=0;a8Y58["q8A"](W,f[F].length);W++){var K=f[F][W];if(typeof E==='function'){E(f,F,W);find_tree_object_children(K,E);}
}
}
}
}
function construct_tree_object_prices(E){var F=new Array();for(var W=0;a8Y58["G6A"](W,_price_matrix["_prices"].length);W++){var K=_price_matrix["_prices"][W],I='',U='',C='',V='',J=0,A=0,P=0,S=0,O=new Array();for(var j in K){if(a8Y58["V6A"](j["toLowerCase"](),'name')){I=Base64["decode"](K[j]);}
if(a8Y58["z6A"](j["toLowerCase"](),'break')){U=Base64["decode"](K[j]);}
if(a8Y58["X6A"](j["toLowerCase"](),'unitprice')||a8Y58["w6A"](j["toLowerCase"](),'rangeprice')){var D=function(f){V=f;}
;C=Base64["decode"](K[j]);D(j);}
if(a8Y58["t6A"](j["toLowerCase"](),'width')){J=Base64["decode"](K[j]);}
if(a8Y58["T6A"](j["toLowerCase"](),'length')){A=Base64["decode"](K[j]);}
if(a8Y58["d6A"](j["toLowerCase"](),'height')){P=Base64["decode"](K[j]);}
if(a8Y58["L6A"](j["toLowerCase"](),'weight')){S=Base64["decode"](K[j]);}
if(a8Y58["j6A"](j["toLowerCase"](),'shippingdimensions')){var n=jQuery('<textarea/>')["html"](Base64["decode"](K[j]))["html"](),f0=JSON["parse"](n["toString"]());for(var E0=0;a8Y58["n6A"](E0,f0.length);E0++){var Z0=0,s0=0,F0=0,o0=0;for(var r0 in f0[E0]){if(a8Y58["Z7A"](r0["toLowerCase"](),'width')){var K0=function(f){s0=f[E0][r0];}
;K0(f0);}
if(a8Y58["s7A"](r0["toLowerCase"](),'length')){var W0=function(f){F0=f[E0][r0];}
;W0(f0);}
if(a8Y58["W7A"](r0["toLowerCase"](),'height')){var g0=function(f){o0=f[E0][r0];}
;g0(f0);}
if(a8Y58["o7A"](r0["toLowerCase"](),'weight')){var m0=function(f){Z0=f[E0][r0];}
;m0(f0);}
}
if(a8Y58["U7A"](parseFloat(s0),0)&&a8Y58["b7A"](parseFloat(F0),0)&&a8Y58["u7A"](parseFloat(o0),0)&&a8Y58["C7A"](parseFloat(Z0),0)){O["push"](construct_shipping_dimensions(s0,F0,o0,Z0));}
}
}
}
if(a8Y58["J7A"](parseFloat(J),0)&&a8Y58["y7A"](parseFloat(A),0)&&a8Y58["A7A"](parseFloat(P),0)&&a8Y58["R7A"](parseFloat(S),0)){O["push"](construct_shipping_dimensions(J,A,P,S));}
if(a8Y58["l7A"](I,E)){var I0={'price_name':I,'break':U,'unit_price':C,'price_type':V,'object_type':'Price','dimensions':O}
;F["push"](I0);}
}
return F;}
function construct_price_break_row(E,F,W,K){var I=[{'type':'rangeprice','display_name':'Flat Rate'}
,{'type':'unitprice','display_name':'Per Unit'}
],U='<tr><td><input type="number" class="price_break" value="'+E+'" min="0"></td>';U+='<td><select class="price_type">';for(var C=0;a8Y58["S9A"](C,I.length);C++){var V='';if(a8Y58["D9A"](I[C]["type"],(F)["toLowerCase"]())){var J=function(f){V=f;}
;J(' selected ');}
U+='<option value="'+I[C]["type"]+'" '+V+'>'+I[C]["display_name"]+'</option>';}
U+='</select></td>';U+='<td><input type="text" class="unit_price" value="'+W+'"></td>';U+='<td>';U+='<div class="shipping_div">';U+='<select class="select_shipping_box">';for(var C=0;a8Y58["N9A"](C,K.length);C++){var A=C+1,P=(a8Y58["f4A"](C,0))?'selected':'';U+='<option value="'+A+'" '+P+'>Box '+A+'</option>';}
U+='</select>';U+='<a href="#" class="add_shipping_box button button-default"><i class="fa fa-plus"></i><span class="add_box_span">Add a Shipping Box</span></a>';U+='<a href="#" class="remove_shipping_box button button-default"><i class="fa fa-times"></i><span class="remove_box_span">Remove Current Box</span></a>';U+='</div>';U+='<div class="shipping_div">';for(var C=0;a8Y58["F4A"](C,K.length);C++){var S=K[C],O=(a8Y58["K4A"](C,0))?true:false;U+=construct_box_div(S,(C+1),O);}
U+='</td>';U+='<td><a href="#" class="remove_price_row remove_button button">Remove</a></td></tr>';return U;}
function construct_tree_object_options(E){var F=new Array();for(var W=0;a8Y58["B3A"](W,_price_matrix["_linked_items"].length);W++){var K=_price_matrix["_linked_items"][W],I='',U='',C='',V=new Array();for(var J in K){if(a8Y58["i3A"](J["toLowerCase"](),'name')){I=Base64["decode"](K[J]);}
if(a8Y58["Y3A"](J["toLowerCase"](),'prices')){U=Base64["decode"](K[J]);}
if(a8Y58["S3A"](J["toLowerCase"](),'options')){C=Base64["decode"](K[J]);}
if(a8Y58["D3A"](J["toLowerCase"](),'name')&&a8Y58["N3A"](J["toLowerCase"](),'prices')&&a8Y58["f6A"](J["toLowerCase"](),'options')&&a8Y58["F6A"](J["toLowerCase"](),'display_name')){var A={'attribute_name':J,'value':Base64["decode"](K[J])}
;V["push"](A);}
}
if(a8Y58["K6A"](I,E)){var P={'display_name':Base64["decode"](K["display_name"]),'parent_name':E,'ID':get_random_num(),'object_type':'Option'}
;if(a8Y58["r6A"](U.length,0)){var S=function(f){P['price_name']=f;}
;S(U);P['prices']=construct_tree_object_prices(U);}
if(a8Y58["v6A"](C.length,0)){var O=function(f){P['options_name']=f;}
;O(C);P['cascading_options']=construct_tree_object_options(C);}
if(a8Y58["Q6A"](V.length,0)){var j=function(f){P['settings']=f;}
;j(V);}
F["push"](P);}
}
return F;}
function initialize_sortable(){jQuery('.tree_branch_list')["sortable"]({axis:'y',cancel:'a, button, input, li.add',items:"li:not(:last-child)",stop:function(W,K){var I=jQuery('> li.tree_branch',K.item.parent())["index"](K["item"]),U=create_data_array(K["item"]["find"]('span.tree_branch_span').data());search_object_by_property_value(tree_object,U["_property"],U["_value"],function(f,E){var F=f[E];f["splice"](E,1);f["splice"](I,0,F);}
);}
}
);}
function toggle_show_size_children(){var f=['MinWidth','MinHeight','MaxWidth','MaxHeight','DefaultWidth','DefaultHeight','SizeControlType'];if(jQuery('[data-fields="ShowSize"]')["prop"]('checked')){for(var E=0;a8Y58["i8A"](E,f.length);E++){jQuery('.'+f[E])["show"]();}
}
else{for(var E=0;a8Y58["Y8A"](E,f.length);E++){jQuery('.'+f[E])["hide"]();}
}
}
function IsJsonString(E){try{JSON["parse"](E);}
catch(f){return false;}
return true;}
function append_tree_view_items(E,F,W,K){var I=new Array();if(K){for(var U=0;a8Y58["c3A"](U,W["cascading_options"].length);U++){var C=W["cascading_options"][U];I["push"](append_tree_view_items('Option',C["display_name"],C,false));}
}
else{if(W["hasOwnProperty"]('options')){for(var U=0;a8Y58["g3A"](U,W["options"].length);U++){var C=W["options"][U];I["push"](append_tree_view_items('Option',C["display_name"],C,false));}
}
if(W["hasOwnProperty"]('cascading_options')){var V='';if(W["hasOwnProperty"]('settings')){for(var J=0;a8Y58["I3A"](J,W["settings"].length);J++){var A=W["settings"][J];if(a8Y58["m3A"](A["attribute_name"]["toLowerCase"](),'label')){var P=function(f){V=f["value"];}
;P(A);break;}
}
}
I["push"](append_tree_view_items('cascading_label',V,W,true));}
}
var S=jQuery('<i></i>')["addClass"]('fa fa-plus-square add_branch'),O=jQuery('<span></span>')["addClass"]('add_branch')["html"]('Add'),j=jQuery('<li></li>')["addClass"]('tree_branch add')["append"](S,O),D=jQuery('<ul></ul>')["addClass"]('tree_branch_list')["append"](I);if(a8Y58["a3A"](E,'Field')||a8Y58["h3A"](E,'cascading_label')){D["append"](j);}
var n=jQuery('<i></i>')["addClass"]('fa fa-pencil edit_label')["attr"]('title','Edit Label'),f0=jQuery('<i></i>')["addClass"]('fa fa-copy duplicate_branch')["attr"]('title','Duplicate'),E0=jQuery('<i></i>')["addClass"]('fa fa-times-circle remove_branch')["attr"]('title','Remove'),Z0=jQuery('<i></i>')["addClass"]('fa fa-plus-square-o expand_branch');if(!W["hasOwnProperty"]('cascading_options')&&a8Y58["q3A"](W["object_type"],'Option')){Z0["css"]('display','none');}
var s0=jQuery('<span></span>')["addClass"]('tree_branch_span')["html"](F)["attr"]('data-id',W["ID"]);if(a8Y58["p3A"](F.length,0)){s0["text"]('<No Label>')["addClass"]('no_label');}
if(W["hasOwnProperty"]('options_name')){s0["attr"]('data-options',W["options_name"]);}
if(W["hasOwnProperty"]('price_name')){s0["attr"]('data-prices',W["price_name"]);}
var F0=jQuery('<li></li>')["addClass"]('tree_branch')["addClass"](E);F0["append"](Z0,s0,n,E0,D);if(!K){E0["before"](f0);}
initialize_sortable();return F0;}
function display_price_breaks(Z0,s0){jQuery('table.prices_table tr:not(.header)')["each"](function(){jQuery(this)["remove"]();}
);var F0=(a8Y58["A2A"](s0.length,0))?['ID','price_name']:['ID'],o0=(a8Y58["R2A"](s0.length,0))?[Z0,s0]:[Z0];search_object_by_property_value(tree_object,F0,o0,function(E,F){if(E[F]["hasOwnProperty"]('prices')){var W=E[F]["prices"];for(var K=0;a8Y58["l2A"](K,W.length);K++){if(W[K]["hasOwnProperty"]('dimensions')){var I=W[K]["dimensions"],U=new Array();for(var C=0;a8Y58["H2A"](C,I.length);C++){var V=0,J=0,A=0,P=0;for(var S in I[C]){var O=I[C][S];if(a8Y58["M2A"](S["toLowerCase"](),'width')){var j=function(f){V=f;}
;j(O);}
if(a8Y58["O2A"](S["toLowerCase"](),'length')){var D=function(f){J=f;}
;D(O);}
if(a8Y58["e2A"](S["toLowerCase"](),'height')){var n=function(f){A=f;}
;n(O);}
if(a8Y58["x2A"](S["toLowerCase"](),'weight')){var f0=function(f){P=f;}
;f0(O);}
}
U["push"](construct_shipping_dimensions(V,J,A,P));}
}
jQuery('table.prices_table tbody')["append"](construct_price_break_row(W[K]["break"],W[K]["price_type"],W[K]["unit_price"],U));}
}
if(!E[F]["hasOwnProperty"]('prices')||a8Y58["E8A"](E[F]["prices"].length,0)){var E0=construct_shipping_dimensions(0,0,0,0);jQuery('table.prices_table tbody')["append"](construct_price_break_row(1,'unitprice',0,[E0]));}
}
);}
function refresh_udraw_price_matrix_preview(W){save_udraw_price_matrix(W,function(E){var F=function(f){_price_matrix["_access_key"]=f;}
;F(E);display_udraw_price_matrix_preview(E);}
);}
function apply_option_changes(q0,h0){if(typeof q0==='number'){search_object_by_property_value(tree_object,'ID',q0,function(f0,E0){var Z0=f0[E0],s0=new Array(),F0=Z0["display_name"];if(jQuery('[data-id="'+q0+'"]').parent().hasClass('Option')){jQuery('table.option_settings_table input')["each"](function(){if(!jQuery(this).parent().parent().hasClass('custom_setting')){var f='',E=jQuery(this)["attr"]('class');if(a8Y58["r4A"](jQuery(this)["attr"]('type'),'checkbox')){f=jQuery(this)["prop"]('checked');}
else if(a8Y58["v4A"](jQuery(this)["attr"]('type'),'number')){f=parseFloat(jQuery(this)["val"]());}
else{f=jQuery(this)["val"]();}
for(var F=0;a8Y58["Q4A"](F,_price_matrix["_option_defaults"].length);F++){var W=_price_matrix["_option_defaults"][F];if(a8Y58["G4A"](W["name"],E)){if(a8Y58["V4A"](W["value"],f)){s0["push"]({'attribute_name':E,'value':f}
);}
}
}
}
}
);jQuery('table.option_settings_table select')["each"](function(){if(!jQuery(this).parent().parent().hasClass('custom_setting')){var f=jQuery(this)["val"](),E=jQuery(this)["attr"]('class');for(var F=0;a8Y58["z4A"](F,_price_matrix["_option_defaults"].length);F++){var W=_price_matrix["_option_defaults"][F];if(a8Y58["X4A"](W["name"],E)){if(a8Y58["w4A"](W["value"],f)){s0["push"]({'attribute_name':E,'value':f}
);}
}
}
}
}
);jQuery('table.option_settings_table tr.custom_setting')["each"](function(){var f=jQuery('input.custom_setting_name',this)["val"](),E=jQuery('input.custom_setting_value',this)["val"]();if(a8Y58["t4A"](f.length,0)&&a8Y58["T4A"](E.length,0)){s0["push"]({'attribute_name':f,'value':E}
);}
}
);var o0={'attribute_name':'label','value':''}
,r0=false;if(Z0["hasOwnProperty"]('settings')){for(var K0=0;a8Y58["d4A"](K0,Z0["settings"].length);K0++){var W0=Z0["settings"][K0];if(a8Y58["L4A"](W0["attribute_name"]["toLowerCase"](),'label')){var g0=function(f){r0=f;}
,m0=function(f){o0["value"]=f["value"];}
;m0(W0);g0(true);break;}
}
}
if(r0){s0["push"](o0);}
if(a8Y58["j4A"](s0.length,0)){var I0=function(f){Z0["settings"]=f;}
;I0(s0);}
Z0["prices"]=new Array();jQuery('table.prices_table tr:not(.header)')["each"](function(){var E=jQuery(this),F=jQuery('input.price_break',this)["val"](),W=jQuery('input.unit_price',this)["val"](),K=jQuery('select.price_type',this)["val"](),I=new Array(),U=jQuery('select.select_shipping_box',this)["children"]().length;for(var C=0;a8Y58["n4A"](C,U);C++){var V=(C+1),J=jQuery('div.box_div[data-box="'+V+'"]',E),A=jQuery('input.shipping_width',J)["val"](),P=jQuery('input.shipping_length',J)["val"](),S=jQuery('input.shipping_height',J)["val"](),O=jQuery('input.shipping_weight',J)["val"](),j=construct_shipping_dimensions(A,P,S,O);I["push"](j);}
if(a8Y58["Z2A"](F.length,0)&&a8Y58["s2A"](W.length,0)){if(!Z0["hasOwnProperty"]('price_name')){var D=function(f){Z0["price_name"]=f;}
;D(F0);}
jQuery('[data-id="'+q0+'"]').data('prices',Z0["price_name"]);var n={'break':F["toString"](),'unit_price':W["toString"](),'price_name':Z0["price_name"],'price_type':K,'object_type':'Price','dimensions':I}
;Z0["prices"]["push"](n);}
}
);}
if(typeof h0==='function'){h0(f0[E0]);}
}
);}
else{if(typeof h0==='function'){h0();}
}
}
function construct_settings_table(){var E='',F=['MinWidth','MinHeight','MaxWidth','MaxHeight','DefaultWidth','DefaultHeight','SizeControlType'],W=['Quantities','MinQty','DefaultQty'];for(var K in _price_matrix["_defaults"]){if(a8Y58["H7A"](K,'ShowPages')||a8Y58["M7A"](K,'DefaultPages')){continue;}
if(a8Y58["O7A"](K,'MinQty')){E+='<tr class="predefined_quantities"><td>Predefine Quantity</td><td><input type="checkbox" class="predefined_quantities"/></td><td>Predefined a set of quantities for customers</td></tr>';}
var I=_price_matrix["_defaults"][K],U=_price_matrix_description["settings"][K],C='',V='',J=I["value"];if(_price_matrix["_settings"]["hasOwnProperty"](K)){var A=function(f){J=f["_settings"][K];}
;A(_price_matrix);}
if(F["indexOf"](K)>-1||W["indexOf"](K)>-1){var P=function(f){V=f;}
,S=function(f){C=f;}
;S(' style="padding-left: 35px;" ');P('child');}
E+='<tr class="'+K+' '+V+'">';E+='<td '+C+'>'+K+'</td>';E+='<td>';if(a8Y58["e7A"](I["type"],'string')){E+='<input class="fields_setting" type="text" data-fields="'+K+'" value="'+J+'"/>';}
else if(a8Y58["x7A"](I["type"],'boolean')){E+='<input class="fields_setting" type="checkbox"  data-fields="'+K+'"';if(J){E+='checked="checked" ';}
E+='/>';}
else if(a8Y58["E9A"](I["type"],'select')){E+='<select class="fields_setting" data-fields="'+K+'">';for(var O=0;a8Y58["c9A"](O,I["options"].length);O++){E+='<option value="'+I["options"][O]+'">'+I["options"][O]+'</option>';}
E+='</select>';}
else if(a8Y58["g9A"](I["type"],'integer')){var j=0,D='';if(a8Y58["I9A"](K,'LayoutMode')){var n=function(f){j=f;}
,f0=function(f){D=f;}
;n(0);f0('max="3"');}
if(a8Y58["m9A"](K,'MinQty')||a8Y58["a9A"](K,'DefaultQty')){var E0=function(f){j=f;}
;E0(1);}
E+='<input class="fields_setting" type="number" data-fields="'+K+'" min="'+j+'" '+D+' value="'+J+'"/>';}
E+='</td>';E+='<td class="option_description">';if(typeof U==='object'){E+='<ul>';for(var O=0;a8Y58["h9A"](O,U.length);O++){E+='<li>'+U[O]+'</li>';}
E+='</ul>';}
else{E+=U;}
E+='</td>';E+='</tr>';}
return E;}
function construct_shipping_dimensions(f,E,F,W){var K=(typeof f!=='undefined'&&a8Y58["N8A"](f["toString"]().length,0)&&a8Y58["f5A"](f,0))?f:0,I=(typeof E!=='undefined'&&a8Y58["F5A"](E["toString"]().length,0)&&a8Y58["K5A"](E,0))?E:0,U=(typeof F!=='undefined'&&a8Y58["r5A"](F["toString"]().length,0)&&a8Y58["v5A"](F,0))?F:0,C=(typeof W!=='undefined'&&a8Y58["Q5A"](W["toString"]().length,0)&&a8Y58["G5A"](W,0))?W:0;return {width:K,length:I,height:U,weight:C}
;}
function refresh_price_matrix_xml(E,F){jQuery["ajax"]({method:'POST',dataType:"json",url:ajaxurl,data:{'settings':E,'action':'udraw_price_matrix_refresh_xml'}
,success:function(f){if(typeof F==='function'){F(f);}
}
}
);}
function construct_option_settings(){var E='';for(var F=0;a8Y58["q9A"](F,_price_matrix["_option_defaults"].length);F++){var W=_price_matrix["_option_defaults"][F],K='';if(typeof _price_matrix_description["linked_prices"][W["name"]]!=='undefined'){var I=function(f){K=f["linked_prices"][W["name"]];}
;I(_price_matrix_description);}
E+='<tr class="'+W["name"]+'"><td>'+W["display_name"]+'</td><td>';if(a8Y58["p9A"](W["type"],'string')){E+='<input type="text" class="'+W["name"]+'" value="'+W["value"]+'"/>';}
else if(a8Y58["k9A"](W["type"],'boolean')){var U='';if(W["value"]){var C=function(f){U=f;}
;C(' checked="checked" ');}
E+='<input type="checkbox" class="'+W["name"]+'" '+U+'/>';}
else if(a8Y58["P9A"](W["type"],'select')){if(a8Y58["B9A"](W["name"],'mode')){E+='<select class="'+W["name"]+'">';for(var V in _price_matrix_description["mode"]){var J=_price_matrix_description["mode"][V];E+='<option value="'+V+'"';if(a8Y58["i9A"](V,W["value"])){E+='selected';}
E+=' title="'+J+'">'+V+'</option>';}
E+='</select>';}
}
else if(a8Y58["Y9A"](W["type"],'integer')){E+='<input type="number" class="'+W["name"]+'" value="'+W["value"]+'" min="0"/>';}
E+='</td><td>'+K+'</td></tr>';}
return E;}
function modify_object_ids(f){if(f["hasOwnProperty"]('ID')){f["ID"]=get_random_num();}
for(var E in f){if(typeof f[E]==='object'&&a8Y58["S8A"](f[E].length,0)){for(var F=0;a8Y58["D8A"](F,f[E].length);F++){modify_object_ids(f[E][F]);}
}
}
}
function construct_box_div(f,E,F){var W=(F)?'active':'',K=f,I='<div class="box_div '+W+'" data-box="'+E+'">';for(var U in K){var C=U,V=K[U],J='<div class="shipping_cell"><label>'+C+'</label></div>',A='<input type="number" class="shipping_'+C+'" value="'+parseFloat(V)+'" min="0" placeholder="0"/>',P='<div class="shipping_cell">'+A+'</div>',S='<div class="shipping_row">'+J+P+'</div>';I+=S;}
I+='</div>';return I;}
function create_data_array(f){var E=new Array(),F=new Array();for(var W in f){var K=f[W];if(a8Y58["p8A"](W,'id')){E["push"]('ID');F["push"](K);}
else if(a8Y58["k8A"](W,'options')){E["push"]('options_name');F["push"](K["toString"]());}
else if(a8Y58["P8A"](W,'prices')){E["push"]('price_name');F["push"](K["toString"]());}
}
return {_property:E,_value:F}
;}
function get_random_num(){return random_num=Math["floor"]((a8Y58["B8A"](Math["random"](),100000))+1);}
function save_udraw_price_matrix(E,F){var W=jQuery("#access_key")["val"]()||_price_matrix["_access_key"]||'';jQuery["ajax"]({method:'POST',dataType:"json",url:ajaxurl,data:{'name':jQuery("#price-matrix-name-textbox")["val"](),'xml':Base64["encode"](E["getValue"]()),'access_key':W,'cats_form':jQuery('#udraw-price-matrix-cats')["serializeArray"](),'font_color':jQuery('#price-matrix-font-color')["val"](),'background_color':jQuery('#price-matrix-background-color')["val"](),'disable_file_upload':jQuery("#price-matrix-disable-file-upload")["is"](":checked"),'disable_design_online':jQuery("#price-matrix-disable-design-online")["is"](":checked"),'udraw_template_id':jQuery("#udraw_template_id")["val"](),'measurement_label':jQuery('#price-matrix-measurement-unit')["val"](),'action':'udraw_price_matrix_save'}
,success:function(f){if(typeof F==='function'){F(f);}
}
}
);}
function check_property_array(f,E,F){var W=new Array();for(var K=0;a8Y58["m8A"](K,E.length);K++){if(f["hasOwnProperty"](E[K])&&a8Y58["a8A"](f[E[K]],F[K])){W["push"](true);}
else{W["push"](false);}
}
if(a8Y58["h8A"](W["indexOf"](false),0)){return true;}
else{return false;}
}
jQuery(document)["ready"](function($){var Z3=ace["edit"]("section_content");Z3["setTheme"]("ace/theme/chrome");Z3["getSession"]()["setMode"]("ace/mode/xml");Z3["setValue"](jQuery("#section_content2")["val"]());Z3["resize"]();$('select#udraw_template_id')["css"]('width','350px')["chosen"]({max_selected_options:1}
);$('select#udraw_template_id')["change"](function(){var E=$('select#udraw_template_id')["val"]();if(E){jQuery["getJSON"](ajaxurl+'?action=udraw_get_templates&template_id='+E,function(f){$('#udraw_template_preview').empty();$('#udraw_template_preview')["prepend"]('<img src="'+f[0]["preview"]+'" style="max-width:250px; border: 1px solid #9C9C9C;" />');}
);}
else{$('#udraw_template_preview').empty();}
}
);$('#udraw_template_id_chosen').width(350);var M0={change:function(f,E){if(a8Y58["V5A"](f["target"]["id"],"price-matrix-font-color")){jQuery("#canvas select")["css"]("color",E["color"]["toString"]());jQuery("#txtQty")["css"]("color",E["color"]["toString"]());}
if(a8Y58["z5A"](f["target"]["id"],"price-matrix-background-color")){jQuery("#canvas select")["css"]("background",E["color"]["toString"]()+" url(<?php echo UDRAW_PLUGIN_URL ?>assets/includes/arrowdown.png) no-repeat 98% center");jQuery("#txtQty")["css"]("background",E["color"]["toString"]()+" url(<?php echo UDRAW_PLUGIN_URL ?>assets/includes/arrowdown.png) no-repeat 98% center");}
}
}
;$('#price-matrix-font-color')["wpColorPicker"](M0);$('#price-matrix-background-color')["wpColorPicker"](M0);$('.ui_tab')["on"]('click',function(){$('.ui_tab, .tab_content')["each"](function(){$(this)["removeClass"]('active');}
);$(this)["addClass"]('active');var f=$(this).data('tab');$('.tab_content[data-tab="'+f+'"]')["addClass"]('active');if(a8Y58["X5A"](f,'source')){$('#save-btn')["hide"]();}
else{$('#save-btn')["show"]();}
}
);$('.option_tab')["on"]('click',function(){$('.option_tab, .option_content')["each"](function(){$(this)["removeClass"]('active');}
);$(this)["addClass"]('active');var f=$(this).data('tab');$('.option_content[data-tab="'+f+'"]')["addClass"]('active');}
);$('.toggle_description')["on"]('click',function(){if($(this)["is"](':checked')){$('.option_description')["hide"]();}
else{$('.option_description')["show"]();}
}
);$('#save_xml')["on"]('click',function(){save_udraw_price_matrix(Z3,function(E){$('div.xml_saved_alert')["show"]();setTimeout(function(){var f=function(){window["location"]["href"]="admin.php?page=udraw_manage_price_matrix&access_key="+E;}
;f();}
,1000);}
);}
);$('#save-btn')["on"]('click',function(){$('.xml_updated_alert')["hide"]();$('.price_matrix_error_alert')["hide"]();var Y0=$('span.tree_branch_span.active').data('id');apply_option_changes(Y0,function(){var H0={'Fields':new Array(),'Field':new Array(),'Option':new Array(),'Price':new Array()}
;$('.fields_setting')["each"](function(){var f=$(this).data('fields'),E=(a8Y58["w5A"]($(this)["attr"]('type'),'checkbox'))?$(this)["prop"]('checked'):$(this)["val"]();if(_price_matrix["_defaults"]["hasOwnProperty"](f)){if(a8Y58["t5A"](_price_matrix["_defaults"][f]["value"]["toString"](),E["toString"]())){H0['Fields']["push"]({'setting':f,'value':E["toString"]()}
);}
}
}
);var R0=new Array(),y0=['MinWidth','MinHeight','MaxWidth','MaxHeight','DefaultWidth','DefaultHeight','SizeControlType'];if($('[data-fields="ShowSize"]')["prop"]('checked')){for(var k0=0;a8Y58["T5A"](k0,y0.length);k0++){var K3=$('[data-fields="'+y0[k0]+'"]')["val"]();H0['Fields']["push"]({'setting':y0[k0],'value':K3}
);}
}
else{for(var k0=0;a8Y58["d5A"](k0,y0.length);k0++){R0["push"](y0[k0]);}
}
if(!$('tr.predefined_quantities input.predefined_quantities')["prop"]('checked')){R0["push"]('Quantities');}
else{R0["push"]('DefaultQty','MinQty');}
for(var T0=0;a8Y58["L5A"](T0,R0.length);T0++){for(var k0=0;a8Y58["j5A"](k0,H0['Fields'].length);k0++){if(a8Y58["n5A"](H0['Fields'][k0]["setting"],R0[T0])){H0['Fields']["splice"](k0,1);}
}
}
H0['Fields']["push"]({'setting':'ShowPages','value':'false'}
);var w0=false;for(var k0=0;a8Y58["Z1A"](k0,tree_object.length);k0++){var T=tree_object[k0]["display_name"],O0=tree_object[k0]["ID"],x0=T+' ('+O0+')';H0['Field']["push"]({'display_name':T,'option_name':x0}
);find_tree_object_children(tree_object[k0],function(E,F,W){var K=E[F][W];if(K["hasOwnProperty"]('object_type')&&a8Y58["s1A"](K["object_type"],'Option')){var I=K["display_name"],U=E["display_name"]+' ('+E["ID"]+')',C=K["display_name"]+' ('+K["ID"]+')',V={'display_name':I,'parent_name':U}
;if(K["hasOwnProperty"]('settings')&&a8Y58["W1A"](K["settings"].length,0)){var J=function(f){V["settings"]=f;}
;var A={}
;for(var P=0;a8Y58["o1A"](P,K["settings"].length);P++){var S=function(f){A[j]=f;}
;var O=K["settings"][P],j=O["attribute_name"];if(!/^[a-zA-Z-_]*$/["test"](j)){var D=function(f){w0=f;}
;D(true);}
var n=O["value"];S(n);}
J(A);}
if(K["hasOwnProperty"]('prices')&&a8Y58["U1A"](K["prices"].length,0)){var f0=function(f){V["price_name"]=f;}
;f0(C);for(var P=0;a8Y58["b1A"](P,K["prices"].length);P++){var E0=function(f){V["price_name"]=f;}
;var Z0=K["prices"][P],s0=C,F0=Z0["unit_price"],o0=Z0["break"],r0=Z0["price_type"],K0=false;for(var W0=0;a8Y58["u1A"](W0,H0['Price'].length);W0++){var g0=H0['Price'][W0];if(a8Y58["C1A"](g0["price_name"],s0)&&a8Y58["J1A"](g0["price_break"],o0)&&a8Y58["y1A"](g0["unit_price"],F0)){var m0=function(f){K0=f;}
;m0(true);break;}
}
if(!K0){if(Z0["hasOwnProperty"]('dimensions')){var I0=new Array();for(var q0=0;a8Y58["A1A"](q0,Z0["dimensions"].length);q0++){var h0=Z0["dimensions"][q0],v0=0,V0=0,z0=0,C0=0;for(var A0 in h0){var n=(!isNaN(parseFloat(h0[A0])))?parseFloat(h0[A0]):0;if(a8Y58["R1A"](A0["toLowerCase"](),'width')){var u0=function(f){v0=f;}
;u0(n);}
if(a8Y58["l1A"](A0["toLowerCase"](),'length')){var J0=function(f){V0=f;}
;J0(n);}
if(a8Y58["H1A"](A0["toLowerCase"](),'height')){var P0=function(f){z0=f;}
;P0(n);}
if(a8Y58["M1A"](A0["toLowerCase"](),'weight')){var t0=function(f){C0=f;}
;t0(n);}
}
var G0={weight:C0,length:V0,width:v0,height:z0}
;if(a8Y58["O1A"](C0,0)&&a8Y58["e1A"](V0,0)&&a8Y58["x1A"](v0,0)&&a8Y58["E0WW"](z0,0)){I0["push"](G0);}
}
}
H0['Price']["push"]({'price_name':s0,'price_break':o0,'unit_price':F0,'price_type':r0,'dimensions':I0}
);}
E0(s0);}
}
if(K["hasOwnProperty"]('cascading_options')&&a8Y58["c0WW"](K["cascading_options"].length,0)){var Q0=function(f){V["options_name"]=f;}
;Q0(C);}
H0['Option']["push"](V);}
}
);}
if(w0){$('.price_matrix_error_alert.space')["show"]();return false;}
var d0=JSON["stringify"](H0);refresh_price_matrix_xml(d0,function(F){Z3["setValue"](Base64["decode"](F));$('a.ui_tab[data-tab="source"]')["trigger"]('click');save_udraw_price_matrix(Z3,function(E){$('div.xml_saved_alert')["show"]();setTimeout(function(){var f=function(){window["location"]["href"]="admin.php?page=udraw_manage_price_matrix&access_key="+E;}
;f();}
,1000);}
);}
);}
);}
);if(a8Y58["g0WW"](_price_matrix["_access_key"].length,0)){display_udraw_price_matrix_preview(_price_matrix["_access_key"]);$('div.preview_container')["show"]();}
window["tree_object"]=construct_tree_object();for(var L0=0;a8Y58["I0WW"](L0,tree_object.length);L0++){var E3=tree_object[L0];$('.tree_branch_contents')["append"](append_tree_view_items('Field',E3["display_name"],E3,false));}
$('.tree_branch_contents')["append"]('<li class="tree_branch add"><i class="fa fa-plus-square add_branch"></i><span class="add_branch">Add</span></li>');$('ul.tree_view_list')["on"]('click','span.tree_branch_span',function(F){var W=$(this),K=$('span.tree_branch_span.active').data(),I=(typeof K!=='undefined'&&K["hasOwnProperty"]('id'))?K["id"]:'';apply_option_changes(I,function(){$('td.content_view')["children"]()["hide"]();$('span.tree_branch_span')["each"](function(){$(this)["removeClass"]('active');}
);W["addClass"]('active');$('div.price_matrix_child_container, div.price_matrix_child_container div.tab_container, div.price_matrix_child_container div.tab_content_container')["hide"]();if(W.parent()["hasClass"]('root')){$('div.price_matrix_settings_container')["show"]();}
else{if(W.parent()["hasClass"]('Option')){$('div.price_matrix_child_container, div.price_matrix_child_container div.tab_container, div.price_matrix_child_container div.tab_content_container')["show"]();var f=W.data('id'),E='';if(typeof W.data('prices')!=='undefined'){E=W.data('prices')["toString"]();}
display_option_settings(f);display_price_breaks(f,E);if(typeof W.data('options')!=='undefined'&&a8Y58["m0WW"](W.data('options').length,0)){$('a.add_cascading_option')["hide"]();}
else{$('a.add_cascading_option')["show"]();}
}
$('div.price_matrix_child_container')["show"]();}
}
);F["stopPropagation"]();}
);$('ul.tree_view_list')["on"]('click','i.expand_branch',function(){var f=$(this)["siblings"]('ul');if(f["is"](':visible')){$(this)["removeClass"]('fa-minus-square-o')["addClass"]('fa-plus-square-o');f["hide"]();}
else{$(this)["removeClass"]('fa-plus-square-o')["addClass"]('fa-minus-square-o');f["show"]();}
}
);$('ul.tree_view_list')["on"]('click','.remove_branch, .duplicate_branch, .edit_label',function(){var E0=$(this),Z0=E0.parent(),s0=E0["siblings"]('span.tree_branch_span'),F0=s0.data(),o0=create_data_array(F0),r0=false;if(Z0["hasClass"]('cascading_label')){var K0=function(f){r0=f;}
;K0(true);}
search_object_by_property_value(tree_object,o0["_property"],o0["_value"],function(E,F){if(E0["hasClass"]('remove_branch')){if(r0){var W=E[F];delete  W["cascading_options"];for(var K=a8Y58["a0WW"](W["settings"].length,1);a8Y58["h0WW"](K,0);K--){var I=W["settings"][K];if(a8Y58["q0WW"](I["attribute_name"]["toLowerCase"](),'label')){W["settings"]["splice"](K,1);break;}
}
Z0["remove"]();var U=W["ID"],C=jQuery('li.tree_branch.Option [data-id="'+U+'"]');C["siblings"]('ul.tree_branch_list, i.expand_branch')["hide"]();C["removeData"]('options');C["removeAttr"]('data-options');var V=jQuery('span.tree_branch_span.active');if(a8Y58["p0WW"](V.data('id'),U)){jQuery('a.add_cascading_option')["show"]();}
}
else{E["splice"](F,1);Z0["remove"]();}
}
if(E0["hasClass"]('duplicate_branch')){var J=JSON["parse"](JSON["stringify"](E[F]));E["splice"](F+1,0,J);modify_object_ids(J);J["display_name"]+=' - Copy';var A=append_tree_view_items(J["object_type"],J["display_name"],J,false);Z0["after"](A);}
if(E0["hasClass"]('edit_label')){var P=$('div.edit_label_modal'),S=$('input.display_name',P),W=E[F],O='',j=(E0.parent()["hasClass"]('Field'))?'Field':(E0.parent()["hasClass"]('Option'))?'Option':'cascading_label';if(E0.parent()["hasClass"]('cascading_label')){if(W["hasOwnProperty"]('settings')){for(var D=0;a8Y58["k0WW"](D,W["settings"].length);D++){if(a8Y58["P0WW"](W["settings"][D]["attribute_name"]["toLowerCase"](),'label')){var n=function(f){O=f["settings"][D]["value"];}
;n(W);break;}
}
}
}
else{var f0=function(f){O=f["display_name"];}
;f0(W);}
S["val"](O)["attr"]({'data-id':W["ID"],'data-type':j}
);P["modal"]('show');}
return ;}
);}
);$('.layout_table')["on"]('click','.add_branch',function(){var C=get_random_num(),V={'ID':C}
,J=$(this).parent().parent().parent();if(!J["hasClass"]('root')){var A=J["find"]('span.tree_branch_span').data(),P=create_data_array(A);search_object_by_property_value(tree_object,P["_property"],P["_value"],function(E,F){var W=function(f){V["display_name"]=f;}
,K=function(f){V["object_type"]=f;}
,I=function(f){V["parent_name"]=f["options_name"];}
,U=E[F];W('New Option');K('Option');I(U);if(U["hasOwnProperty"]('options')){U["options"]["push"](V);}
else if(U["hasOwnProperty"]('cascading_options')){U["cascading_options"]["push"](V);}
}
);}
else{var S=function(f){V["display_name"]=f;}
,O=function(f){V["options_name"]=f;}
,j=function(f){V["object_type"]=f;}
;O('New Field');S('New Field');j('Field');V["options"]=new Array();tree_object["push"](V);}
$(append_tree_view_items(V["object_type"],V["display_name"],V,false))["insertBefore"]($(this).parent());$('span.tree_branch_span[data-id="'+V["ID"]+'"]')["trigger"]('click');}
);$('.layout_table')["on"]('click','.remove_custom_setting, .remove_price_row',function(){var P=$(this),S=$('span.tree_branch_span.active'),O=create_data_array(S.data());search_object_by_property_value(tree_object,O["_property"],O["_value"],function(f,E){var F=f[E],W=P.parent().parent();if(P["hasClass"]('remove_custom_setting')){var K=W["find"]('input[type="text"].custom_setting_name')["val"]();if(F["hasOwnProperty"]('settings')){var I=F["settings"];for(var U=0;a8Y58["B0WW"](U,I.length);U++){if(a8Y58["i0WW"](I[U]["attribute_name"],K)){I["splice"](U,1);break;}
}
}
}
if(P["hasClass"]('remove_price_row')){var C=W["find"]('input[type="number"].price_break')["val"]()["toString"](),V=W["find"]('select.price_type')["val"]()["toString"](),J=W["find"]('input[type="text"].unit_price')["val"]()["toString"]();if(F["hasOwnProperty"]('prices')){var A=F["prices"];for(var U=0;a8Y58["Y0WW"](U,A.length);U++){if(a8Y58["S0WW"](A[U]["break"],C)&&a8Y58["D0WW"](A[U]["price_type"],V)&&a8Y58["N0WW"](A[U]["unit_price"],J)){A["splice"](U,1);break;}
}
}
}
}
);$(this).parent().parent().remove();}
);$('a.add_price_break')["on"]('click',function(){var E='unitprice';if(a8Y58["f3WW"]($('table.prices_table tbody')["children"]().length,1)){var F=$('table.prices_table tbody tr:last-child select.price_type')["val"]();if(a8Y58["F3WW"](F,undefined)&&a8Y58["K3WW"](F,null)){var W=function(f){E=f;}
;W(F);}
}
var K=construct_shipping_dimensions(0,0,0,0);$('table.prices_table tbody')["append"](construct_price_break_row(1,E,0,[K]));$('div.tab_content_container')["animate"]({scrollTop:$('input.price_break').last().offset().top}
);return false;}
);$('a.add_option_setting')["on"]('click',function(){$('table.option_settings_table')["append"](construct_custom_option_row('',''));$('div.tab_content_container')["animate"]({scrollTop:$('tr.custom_setting').last().offset().top}
);return false;}
);$('table.price_matrix_settings tbody')["append"](construct_settings_table());if(a8Y58["r3WW"]($('[data-fields="Quantities"]').length,0)){if(a8Y58["v3WW"]($('[data-fields="Quantities"]')["val"]().length,0)){$('input.predefined_quantities')["prop"]('checked',true);}
}
$('div.option_content table.option_settings_table')["append"](construct_option_settings());$('.layout_table')["on"]('change','input[type="checkbox"]',function(){if(a8Y58["Q3WW"]($(this).data('fields'),'ShowSize')){toggle_show_size_children();}
if($(this)["hasClass"]('predefined_quantities')){toggle_show_quantity_children();}
}
);toggle_show_size_children();toggle_show_quantity_children();initialize_sortable();$('a[data-tab="source"].ui_tab')["on"]('click',function(){Z3["renderer"]["updateFull"]();}
);$('li.tree_branch.root span.tree_branch_span')["first"]()["trigger"]('click');$('a.add_cascading_option')["on"]('click',function(){var U=$(this),C=$('span.tree_branch_span.active'),V=create_data_array(C.data());search_object_by_property_value(tree_object,V["_property"],V["_value"],function(E,F){var W=E[F];if(!W["hasOwnProperty"]('cascading_options')){W["cascading_options"]=new Array();}
if(!W["hasOwnProperty"]('options_name')){var K=function(f){W["options_name"]=f["display_name"];}
;K(W);}
if(!W["hasOwnProperty"]('settings')){W["settings"]=new Array();}
W["settings"][W["settings"].length]={'attribute_name':'label','value':'New Cascading Label'}
;var I=append_tree_view_items('cascading_label','New Cascading Label',W,true);C["siblings"]('i.expand_branch')["show"]()["trigger"]('click');C["siblings"]('ul.tree_branch_list')["append"](I);I["find"]('i.expand_branch')["show"]()["trigger"]('click');I["find"]('ul.tree_branch_list')["find"]('span.add_branch')["trigger"]('click');C.data('options',W["options_name"]);U["hide"]();}
);}
);$('button.apply_label_change')["on"]('click',function(){var P=$('div.edit_label_modal'),S=$('input.display_name',P),O=parseInt(S["attr"]('data-id')),j=S["attr"]('data-type'),D=S["val"]();search_object_by_property_value(tree_object,['ID'],O,function(E,F){var W=E[F];if(a8Y58["G3WW"](j,'cascading_label')){var K=false;if(W["hasOwnProperty"]('settings')){for(var I=0;a8Y58["V3WW"](I,W["settings"].length);I++){if(a8Y58["z3WW"](W["settings"][I]["attribute_name"]["toLowerCase"](),'label')){var U=function(f){K=f;}
,C=function(f){W["settings"][I]["value"]=f;}
;C(D);U(true);break;}
}
}
else{W["settings"]=new Array();}
if(!K){W["settings"]["push"]({'attribute_name':'label','value':D}
);}
}
else{if(W["hasOwnProperty"]('display_name')){var V=function(f){W["display_name"]=f;}
;V(D);}
}
var J=$('li.tree_branch.'+j+' > span.tree_branch_span[data-id="'+O+'"]');if(a8Y58["X3WW"](D.length,0)){var A=function(f){D=f;}
;A('<No Label>');J["addClass"]('no_label');}
else{J["removeClass"]('no_label');}
J["text"](D);P["modal"]('hide');return false;}
);}
);window["onkeydown"]=function(f){var E=f["keyCode"]?f["keyCode"]:f["which"];if(a8Y58["w3WW"](E,13)){if($('div.edit_label_modal input.display_name')["is"](':focus')){$('div.edit_label_modal button.apply_label_change')["trigger"]('click');}
}
}
;$('div.edit_label_modal')["on"]('shown.bs.modal',function(){var f=$(this);setTimeout(function(){f["find"]('input.display_name')[0]["focus"]();}
,100);}
);$('table.prices_table')["on"]('click','a.add_shipping_box, a.remove_shipping_box',function(){if($(this)["hasClass"]('add_shipping_box')){var f=$(this)["siblings"]('select.select_shipping_box'),E=f["children"]().length+1;f["append"]('<option value="'+E+'" selected>Box '+E+'</option>');var F=construct_box_div(construct_shipping_dimensions(0,0,0,0),E,true);f.parent()["siblings"]('div.shipping_div')["children"]()["removeClass"]('active');f.parent()["siblings"]('div.shipping_div')["append"](F);}
if($(this)["hasClass"]('remove_shipping_box')){var f=$(this)["siblings"]('select.select_shipping_box'),W=f["val"](),K=f.parent()["siblings"]('div.shipping_div')["find"]('div.box_div[data-box="'+W+'"]'),I=$('option[value="'+W+'"]',f)["next"](),U=(a8Y58["t3WW"](I.length,0))?I:$('option[value="'+W+'"]',f)["prev"](),C=(typeof U!=='undefined')?U["val"]():'';f["children"]('option[value="'+W+'"]')["remove"]();K["remove"]();f["val"](C)["trigger"]('change');}
return false;}
);$('table.prices_table')["on"]('change','select.select_shipping_box',function(){if($(this)["hasClass"]('select_shipping_box')){var f=$(this)["val"](),E=$(this).parent().siblings('div.shipping_div');$('div.box_div',E)["each"](function(){$(this)["removeClass"]('active');}
);$('div.box_div[data-box="'+f+'"]',E)["addClass"]('active');}
}
);}
);